import{r as v,j as e,A as E,E as y}from"./index-CuxxOwMk.js";import{u as D}from"./useFormValidation-iLl9Lwqq.js";import{u}from"./useWordsContext-D1ncHI0j.js";const R="_homePage_26gx1_1",S="_title_26gx1_4",h={homePage:R,title:S},$="_table_fljoe_1",A="_headerRow_fljoe_8",I="_headerCell_fljoe_14",P="_row_fljoe_22",k="_buttonSave_fljoe_35",w="_buttonClose_fljoe_56",V="_buttonDelete_fljoe_56",W="_buttonEdit_fljoe_71",F="_invalid_fljoe_86",s={table:$,headerRow:A,headerCell:I,row:P,buttonSave:k,buttonClose:w,buttonDelete:V,buttonEdit:W,invalid:F};function T({word:n}){const[i,l]=v.useState(!1),{value:t,errors:o,validateValue:m,handleChange:r,resetErrors:d,setValue:j}=D({id:n.id,english:n.english,transcription:n.transcription,russian:n.russian,tags:"",tags_json:""}),x=()=>{l(!1),j({id:n.id,english:n.english,transcription:n.transcription,russian:n.russian,tags:"",tags_json:""}),d()},{updateExistingWord:g,setIsDelete:_}=u(),p=async()=>{if(m()){if(console.log("Параметры формы",t),!t.id||isNaN(t.id)){console.error("ID невалидный или отсутствует:",t.id),alert("Произошла ошибка: некорректный ID");return}try{await g(t.id,t),console.log("Изменения сохранены на сервере")}catch(a){console.log("Ошибка при сохранении на сервере:",a),alert("Произошла ошибка при сохранении на сервере. Пожалуйста, попробуйте снова.");return}l(!1),d()}else alert("Проверьте точность данных. Поле 'english' должно содержать только латинские буквы, а все поля не должны содержать цифры.")},b=()=>{l(!0)},C=async()=>{if(window.confirm("Вы уверенны, что хотите удалить это слово?")){console.log("Удаляем слово с ID:",n.id);try{await _(n.id),console.log("Слово успешно удалено")}catch(f){console.log("Ошибка при удалении слова:",f),alert("Произошла ошибка при удалении. Пожалуйста, попробуйте сноваю")}}},N=!t.english.trim()||!t.transcription.trim()||!t.russian.trim(),c=a=>!a||!a.trim();return i?e.jsxs("tr",{className:s.headerRow,children:[e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.english,name:"english",onChange:r,className:`${c(t.english)?s.invalid:""}
                        ${o.english?s.invalid:""}`})}),e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.transcription,name:"transcription",onChange:r,className:`${c(t.transcription)?s.invalid:""}
                        ${o.transcription?s.invalid:""}`})}),e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.russian,name:"russian",onChange:r,className:`${c(t.russian)?s.invalid:""}
                        ${o.russian?s.invalid:""}`})}),e.jsxs("td",{className:s.headerCell,children:[e.jsx("button",{className:s.buttonSave,onClick:p,disabled:N,children:"Сохранить"}),e.jsx("button",{className:s.buttonClose,onClick:x,children:"Закрыть"})]})]}):e.jsxs("tr",{className:s.row,children:[e.jsx("td",{className:s.headerCell,children:t.english}),e.jsx("td",{className:s.headerCell,children:t.transcription}),e.jsx("td",{className:s.headerCell,children:t.russian}),e.jsxs("td",{className:s.headerCell,children:[e.jsx("button",{className:s.buttonEdit,onClick:b,children:"Изменить"}),e.jsx("button",{className:s.buttonDelete,onClick:C,children:"Удалить"})]})]})}function B(){const{words:n,loading:i}=u();return e.jsxs("table",{className:s.table,children:[e.jsx("thead",{children:e.jsxs("tr",{className:s.headerRow,children:[e.jsx("th",{className:s.headerCell,children:"СЛОВО"}),e.jsx("th",{className:s.headerCell,children:"ТРАНСКРИПЦИЯ"}),e.jsx("th",{className:s.headerCell,children:"ПЕРЕВОД"}),e.jsx("th",{className:s.headerCell,children:"ДЕЙСТВИЕ"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",children:e.jsx(E,{})})}):n.map(l=>e.jsx(y,{children:e.jsx(T,{word:l},l.id)},l.id))})]})}function z(){return e.jsxs("div",{className:h.homePage,children:[e.jsx("h2",{className:h.title,children:"Список слов"}),e.jsx(B,{})]})}export{z as default};
