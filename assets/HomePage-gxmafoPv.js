import{r as f,j as e,A as E,E as y}from"./index-B8Qy7ctU.js";import{u as D}from"./useFormValidation-Bmki_bB6.js";import{u}from"./useWordsContext-szjSUQJg.js";const R="_homePage_dnrlz_1",S="_title_dnrlz_4",h={homePage:R,title:S},$="_table_11ldx_1",A="_headerRow_11ldx_8",I="_headerCell_11ldx_13",P="_row_11ldx_21",k="_buttonSave_11ldx_34",w="_buttonClose_11ldx_53",V="_buttonDelete_11ldx_53",W="_buttonEdit_11ldx_66",z="_invalid_11ldx_79",s={table:$,headerRow:A,headerCell:I,row:P,buttonSave:k,buttonClose:w,buttonDelete:V,buttonEdit:W,invalid:z};function F({word:l}){const[i,n]=f.useState(!1),{value:t,errors:r,validateValue:m,handleChange:o,resetErrors:d,setValue:x}=D({id:l.id,english:l.english,transcription:l.transcription,russian:l.russian}),j=()=>{n(!1),x({id:l.id,english:l.english,transcription:l.transcription,russian:l.russian}),d()},{updateExistingWord:_,setIsDelete:p}=u(),g=async()=>{if(m()){if(console.log("Параметры формы",t),!t.id||isNaN(t.id)){console.error("ID невалидный или отсутствует:",t.id),alert("Произошла ошибка: некорректный ID");return}try{await _(t.id,t),console.log("Изменения сохранены на сервере")}catch(a){console.log("Ошибка при сохранении на сервере:",a),alert("Произошла ошибка при сохранении на сервере. Пожалуйста, попробуйте снова.");return}n(!1),d()}else alert("Проверьте точность данных. Поле 'english' должно содержать только латинские буквы, а все поля не должны содержать цифры.")},b=()=>{n(!0)},C=async()=>{if(window.confirm("Вы уверенны, что хотите удалить это слово?")){console.log("Удаляем слово с ID:",l.id);try{await p(l.id),console.log("Слово успешно удалено")}catch(v){console.log("Ошибка при удалении слова:",v),alert("Произошла ошибка при удалении. Пожалуйста, попробуйте сноваю")}}},N=!t.english.trim()||!t.transcription.trim()||!t.russian.trim(),c=a=>!a||!a.trim();return i?e.jsxs("tr",{className:s.headerRow,children:[e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.english,name:"english",onChange:o,className:`${c(t.english)?s.invalid:""}
                        ${r.english?s.invalid:""}`})}),e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.transcription,name:"transcription",onChange:o,className:`${c(t.transcription)?s.invalid:""}
                        ${r.transcription?s.invalid:""}`})}),e.jsx("td",{className:s.headerCell,children:e.jsx("input",{type:"text",value:t.russian,name:"russian",onChange:o,className:`${c(t.russian)?s.invalid:""}
                        ${r.russian?s.invalid:""}`})}),e.jsxs("td",{className:s.headerCell,children:[e.jsx("button",{className:s.buttonSave,onClick:g,disabled:N,children:"Сохранить"}),e.jsx("button",{className:s.buttonClose,onClick:j,children:"Закрыть"})]})]}):e.jsxs("tr",{className:s.row,children:[e.jsx("td",{className:s.headerCell,children:t.english}),e.jsx("td",{className:s.headerCell,children:t.transcription}),e.jsx("td",{className:s.headerCell,children:t.russian}),e.jsxs("td",{className:s.headerCell,children:[e.jsx("button",{className:s.buttonEdit,onClick:b,children:"Изменить"}),e.jsx("button",{className:s.buttonDelete,onClick:C,children:"Удалить"})]})]})}function T(){const{words:l,loading:i}=u();return e.jsxs("table",{className:s.table,children:[e.jsx("thead",{children:e.jsxs("tr",{className:s.headerRow,children:[e.jsx("th",{className:s.headerCell,children:"СЛОВО"}),e.jsx("th",{className:s.headerCell,children:"ТРАНСКРИПЦИЯ"}),e.jsx("th",{className:s.headerCell,children:"ПЕРЕВОД"}),e.jsx("th",{className:s.headerCell,children:"ДЕЙСТВИЕ"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",children:e.jsx(E,{})})}):l.map(n=>e.jsx(y,{children:e.jsx(F,{word:n},n.id)},n.id))})]})}function q(){return e.jsxs("div",{className:h.homePage,children:[e.jsx("h2",{className:h.title,children:"Список слов"}),e.jsx(T,{})]})}export{q as default};
